<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>IFE ECMAScript</title>
	</head>
	<style>
		.calcuSection, .transDec{
			width: 600px;
			margin: 50px;
			padding: 20px;
			box-sizing: border-box;
			border: 1px solid #ddd;
		}
		.calcuSection button {
			width: 30px;
			height: 30px;
			margin: 10px;
		}
		#dec-number {
			width: 200px;
		}
		#bin-bit {
			width: 200px;
		}
	</style>
	<body>
		<section class="calcuSection">
			<h3>加减乘除计算器</h3>
			<input id="first-number" type="number" value="0" placeholder="第一个数字">
    			<input id="second-number" type="number" value="0" placeholder="第二个数字"><br />
    			<button id="add-btn">加</button>
    			<button id="minus-btn">减</button>
    			<button id="times-btn">乘</button>
    			<button id="divide-btn">除</button>
   			<p id="result">运算结果</p>
		</section>
		<section class="transDec">
			<h3>十进制转化为二进制</h3>
			<input id="dec-number" type="number" placeholder="输入一个十进制非负整数">
			 <input id="bin-bit" type="number" placeholder="输入转化后二进制数字位数">
    			<button id="trans-btn">转化为二进制</button>
    			<p id="trans-result">运算结果</p>
		</section>
	</body>
	<script>
		//获取id标签元素
		function $(id) {
			return document.getElementById(id);
		}
		//页面初始化
		window.onload = function() {
			initOnclick();
		}
		//初始化button绑定事件
		function initOnclick() {
			var addBtn = $("add-btn");
			initButtonClick(addBtn, "+");
			
			var minBtn = $("minus-btn");
			initButtonClick(minBtn, "-");
			
			var timeBtn = $("times-btn");
			initButtonClick(timeBtn, "*");
			
			var divBtn = $("divide-btn");
			initButtonClick(divBtn, "/");
			
			var transBtn = $("trans-btn");
			transBtn.addEventListener("click", transBtnClick, false);
		}
		//添加btn事件
		function initButtonClick (el, type) {
			el.addEventListener("click",calcuClick.bind(el, type), false);
		}
		//计算操作
		function calcuClick(type) {
			var resultEl = $("result");
			var leftNum = parseFloat($("first-number").value);
			var rightNum = parseFloat($("second-number").value);
			var resultValue = "";
			switch(type){
				case "+": 
					resultValue = leftNum + " "+type+" "  + rightNum + " = " + (leftNum+rightNum);
				break;
				case "-":
					resultValue = leftNum + " "+type+" "  + rightNum + " = " + (leftNum-rightNum);
				break;
				case "*":
					resultValue = leftNum + " "+type+" "  + rightNum + " = " + (leftNum*rightNum);
				break;
				case "/":
					if(rightNum == 0) {
						alert("分母不能为0");
						return;
					}
					resultValue = leftNum + " "+type+" "  + rightNum + " = " + (leftNum/rightNum);
				break;
			}
			resultEl.innerHTML = "运算结果: "+resultValue;
		}
		//十进制转化二进制
		function transBtnClick() {
			var inputValue = $("dec-number").value;
			var inputBitValue =  $("bin-bit").value
			if(inputValue.indexOf(".") != -1 || inputValue == null || inputValue.length == 0) {
				alert("请输入非负整数");
				return;
			}
			if(inputBitValue.indexOf(".") != -1 || inputBitValue == null || inputBitValue.length == 0) {
				alert("请输入大于0的整数位");
				return;
			}
			var inputNum = parseInt(inputValue);
			var inputBitNum = parseInt(inputBitValue);
			if(inputNum < 0) {
				alert("请输入非负整数");
				return;
			}
			if(inputNum <= 0) {
				alert("请输入大于0的整数位");
				return;
			}
			var resultValue = inputNum.toString(2)
			var resultEl = $("trans-result");
			if(inputBitNum < resultValue.length) {
				resultValue = resultValue + "  输入位数ERROR"
			} else {
				var minNum = inputBitValue - resultValue.length;
				var preStr = "";
				for (var i = 0; i < minNum; i++) {
					preStr += "0";
				}
				resultValue = preStr+resultValue;
			}
			resultEl.innerHTML = "运算结果: "+resultValue;
		}
		
		
		
	</script>
</html>
